<!--
This is just a useful tool for converting the lang files
from FastCraft+ v0 into kotlin lang files for FastCraft v1.
-->

<html>
<body>
YAML Here:<br>
<textarea id="from" style="width:100%; height: 300px; white-space: pre"></textarea><br>

<button onclick="convert()">Convert</button><br>
<br>
<textarea id="to" style="width:100%; height: 300px; white-space: pre" disabled></textarea>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/3.8.4/js-yaml.js"></script>
<script>
var taFrom = document.getElementById("from");
var taTo = document.getElementById("to");

taFrom.value = `
gui:
  title: 'FastCraft+'

  # Leave blank to keep item names unchanged.
  item-name: # Variables: name

  hashcode: # Variables: hash
  - '&7Hashcode:'
  - '&7 <hash>'

  ingredients:
    label: '&aIngredients:'
    item: '&a <amount>x <item>' # Variables: amount, item

  results:
    label: '&aResults:'
    item: '&a <amount>x <item>' # Variables: amount, item

  toolbar:
    page-prev:
      title: '&aPrevious Page'
      description: # Variables: prev, total, cur
      - '&bGo to page <prev>/<total>'

    page-next:
      title: '&aNext Page'
      description: # Variables: prev, total, cur
      - '&bGo to page <next>/<total>'

    craft-items:
      title: '&aCraft Items'
      description:
      - '&bCraft items'

    craft-armor:
      title: '&aCraft Dyed Armor'
      description:
      - '&bCraft dyed leather armor'

    craft-fireworks:
      title: '&aCraft Fireworks'
      description:
      - '&bCraft firework rockets and stars'

    refresh:
      title: '&aRefresh'
      description:
      - '&bRefresh the FastCraft+ interface'

    multiplier:
      title: '&aCrafting Multiplier (<mult>x)' # Variables: mult
      description: # Variables: mult
      - '&bLeft/right click to increase/decrease'
      - '&bShift click to increment by 1'
      - '&bMiddle click to reset to 1x'

    workbench:
      title: '&aCrafting Grid'
      description:
      - '&bOpen a 3x3 crafting grid'
      - '&bUse &a/fc toggle&b to disable FastCraft+'

commands:
  usage: '&cCommand usage: <usage>' # Variables: usage
  no-perm: '&cYou don''t have the required permission for this command: <perm>' # Variables: perm
  player-only: '&cYou must be a player to use this command.'
  console-only: '&cThis command can only be executed in the server console'
  unknown-player: '&cUnknown player: <player>' # Variables: player

  fastcraft toggle:
    output:
      on-self:   '&aEnabled FastCraft+ interface.'
      off-self:  '&aDisabled FastCraft+ interface.'
      on-other:  '&aEnabled FastCraft+ interface for <player>.'  # Variables: player
      off-other: '&aDisabled FastCraft+ interface for <player>.' # Variables: player

  fastcraftadmin reload:
    output: '&aFastCraft+ config files reloaded.'
`;


String.prototype.replaceAll = function(search, replacement) {
    var target = this;
    return target.split(search).join(replacement);
};

function convert() {
var l = jsyaml.load(taFrom.value);

function c(str) {
return str
.replaceAll("\"", "\\\"")
.replaceAll("&", "ยง")
.replaceAll("''", "'");
}

function list(arr) {
if (arr.length == 0) return "";

var result = "";
for (var i = 0; i < arr.length; i++) {
    if (i != 0) result += ","
    result += `${"\n"}            "${c(arr[i])}"`;
}
return result + "\n    ";
}

var result = `
    override fun gui_title() = "FastCraft"

    override fun gui_ingredients_label() = "${c(l.gui.ingredients.label)}"
    override fun gui_ingredients_item(item: String, amount: Int) = "${
c(l.gui.ingredients.item.replaceAll("<amount>", "${amount}").replaceAll("<item>", "${item}"))}"

    override fun gui_results_label() = "${c(l.gui.results.label)}"
    override fun gui_results_item(item: String, amount: Int) = "${
c(l.gui.results.item.replaceAll("<amount>", "${amount}").replaceAll("<item>", "${item}"))}"

    override fun gui_recipeHash_label() = "${c(l.gui.hashcode[0])}"
    override fun gui_recipeHash_code(hashcode: String) = "${c(l.gui.hashcode[1])}"

    override fun gui_toolbar_prev_title(cur: Int, prev: Int, total: Int) = "${c(l.gui.toolbar["page-prev"].title)}"
    override fun gui_toolbar_prev_desc(cur: Int, prev: Int, total: Int) = listOf(${
list(l.gui.toolbar["page-prev"].description)
.replaceAll("<cur>", "${cur}").replaceAll("<prev>", "${prev}").replaceAll("<total>", "${total}")})

    override fun gui_toolbar_next_title(cur: Int, next: Int, total: Int) = "${c(l.gui.toolbar["page-next"].title)}"
    override fun gui_toolbar_next_desc(cur: Int, next: Int, total: Int) = listOf(${
list(l.gui.toolbar["page-next"].description)
.replaceAll("<cur>", "${cur}").replaceAll("<next>", "${next}").replaceAll("<total>", "${total}")})

    override fun gui_toolbar_refresh_title() = "${c(l.gui.toolbar.refresh.title)}"
    override fun gui_toolbar_refresh_desc() = listOf(${list(l.gui.toolbar.refresh.description)})

    override fun gui_toolbar_multiplier_title(multiplier: Int) = "${c(l.gui.toolbar.refresh.title)}"
    override fun gui_toolbar_multiplier_desc(multiplier: Int) = listOf(${list(l.gui.toolbar.multiplier.description)})

    override fun gui_toolbar_workbench_title() = "${c(l.gui.toolbar.workbench.title)}"
    override fun gui_toolbar_workbench_desc() = listOf(${list(l.gui.toolbar.workbench.description)})

    override fun command_err_usage(commandUsage: String) = "${c(l.commands.usage).replaceAll("<usage>", "${commandUsage}")}"
    override fun command_err_noPerm(permission: String) = "${c(l.commands["no-perm"]).replaceAll("<perm>", "${permission}")}"
    override fun command_err_playerOnly() = "${c(l.commands["player-only"])}"
    override fun command_err_consoleOnly() = "${c(l.commands["console-only"])}"
    override fun command_err_unknownPlayer(player: String) = "${c(l.commands["unknown-player"].replaceAll("<player>", "${player}"))}"

    override fun command_fc_toggle_output_self_on() = "${c(l.commands["fastcraft toggle"].output["on-self"])}"
    override fun command_fc_toggle_output_self_off() = "${c(l.commands["fastcraft toggle"].output["off-self"])}"
    override fun command_fc_toggle_output_other_on(player: String) = "${c(l.commands["fastcraft toggle"].output["on-other"])
.replaceAll("<player>", "${player}")}"
    override fun command_fc_toggle_output_other_off(player: String) = "${c(l.commands["fastcraft toggle"].output["off-other"])
.replaceAll("<player>", "${player}")}"

    override fun command_fca_reload() = "${c(l.commands["fastcraftadmin reload"].output)}"
`

result = result.replaceAll("FastCraft+", "FastCraft");

taTo.value = result;

}
</script>

</body>
</html>
